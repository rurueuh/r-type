#include "SFML.hpp"
#include "World/World.hpp"
#include "Entity.hpp"
#include "TestSystem.hpp"
#include "Component.hpp"
#include "LevelManager.hpp"
#include "DevLevel.hpp"
#include "GameEngine.hpp"
#include "Utils/Utils.hpp"
#include <snappy.h>

int main(void)
{
    Utils::registerComponent<PvComponent>("PvComponent");
    Utils::registerComponent<InputComponent>("PlayerInputComponent");
    Utils::registerComponent<DrawableComponent>("DrawableComponent");
    Utils::registerComponent<TransformComponent>("TransformComponent");

    auto &engine = GameEngine::GetInstance();
    engine.Init<DevLevel>();
    engine.Run();

    return 0;
}


//int main(void) {
//    std::string original = "0 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:1 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:2 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:3 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:4 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:5 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:6 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:7 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:8 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:9 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:10 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:11 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:12 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:13 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:14 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:15 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:16 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:17 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:18 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:19 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:20 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:21 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:22 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:23 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:24 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:25 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:26 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:27 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:28 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:29 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:30 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:31 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:32 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:33 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:34 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:35 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:36 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:37 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:38 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:39 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:40 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:41 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:42 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:43 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:44 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:45 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:46 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:47 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:48 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:49 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:50 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:51 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:52 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:53 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:54 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:55 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:56 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:57 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:58 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:59 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:60 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:61 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:62 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:63 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:64 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:65 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:66 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:67 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:68 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:69 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:70 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:71 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:72 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:73 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:74 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:75 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:76 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:77 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:78 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:79 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:80 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:81 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:82 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:83 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:84 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:85 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:86 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:87 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:88 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:89 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:90 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:91 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:92 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:93 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:94 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:95 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:96 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:97 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:98 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:99 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:100 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:101 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:102 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:103 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:104 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:105 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:106 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:107 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:108 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:109 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:110 [PvComponent { 100 },PlayerInputComponent {  },DrawableComponent { ../assets/player.png 1 3 32 14 },TransformComponent { 100 100 1 1 0 }]:";
//    
//    std::string compressed;
//    snappy::Compress(original.data(), original.size(), &compressed);
//    std::cout << " " << compressed << std::endl;
//
//    std::string decompressed;
//    snappy::Uncompress(compressed.data(), compressed.size(), &decompressed);
//    std::cout << " " << decompressed << std::endl;
//    std::cout << "size diff = " << (int)decompressed.size() - (int)compressed.size() << std::endl;
//
//    return 0;
//}